
    <section class='stats'>
      <h2>Our top and bottom rated books as rated by users</h2>
      <div class="top_three">
        <p>Top Three</p>
        <% @top_three.each do |b| %>
          <p>Book: <%= b[0] %>, Average Rating: <%= b[1] %></p>
        <% end %>
      </div>
      <div class="bottom_three">
        <p>Bottom Three</p>
        <% @bottom_three.each do |b| %>
          <p>Book: <%= b[0] %>, Average Rating: <%= b[1] %></p>
        <% end %>
      </div>
      <h2>Our top reviewers</h2>
      <div class="top_reviewers">
        <% @top_users.each do |u| %>
          <p>User: <%= u[0] %>, Review Count: <%= u[1] %></p>
        <% end %>
      </div>
    </section>
    <div class="flex-container">
    <% @books.each do |b| %>

      <div class="info-container">
        <%= link_to(b.title, book_path(b), id: "book-title-#{b.id}") %>
        <p>
          <span class="data-label">
            <%= b.authors.count > 1 ? "Authors: " : "Author: " %>
          </span>
          <% b.authors.each do |a| %>
            <%= link_to(a.name, author_path(a), id: "author-#{a.id}") %>
          <% end %>
        </p>
        <% average_rating = b.reviews.average(:rating) %>
        <p>
          <span class="data-label"> Average Rating: </span>
          <span class="datum"><%= average_rating.round(2) if average_rating %></span>
        </p>
        <p>
          <span class="data-label"> Total Reviews: </span>
          <span class="datum"><%= b.reviews.count %></span>
        </p>
        <p>
          <span class="data-label"> Page Count: </span>
          <span class="datum"><%= b.page_count %></span>
        </p>
        <p>
          <span class="data-label"> Publish Year: </span>
          <span class="datum"><%= b.publish_year %></span>
        </p>
      </div>
      <% end %>
      <%= link_to "Add a book", new_book_path %>

    </div>
